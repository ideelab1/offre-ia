<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offre de Service Interactive - IdéeLab inc.</title>

    <!-- ===== AJOUTS SEO ===== -->
    <meta name="description" content="Découvrez les services d'IdéeLab, calculez le ROI de vos projets d'automatisation et générez une offre de service interactive et personnalisée grâce à l'IA.">
    <meta name="keywords" content="IdéeLab, automatisation, intelligence artificielle, IA, n8n, ROI, offre de service, innovation">

    <!-- Open Graph / Facebook / LinkedIn -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://offre-ideelab.vercel.app/"> <!-- Mettez votre URL finale ici -->
    <meta property="og:title" content="Offre de Service Interactive - IdéeLab inc.">
    <meta property="og:description" content="Générez une offre de service personnalisée pour vos projets d'automatisation et d'IA.">
    <meta property="og:image" content="https://n8n.ideelabcloud.ovh/images/og-image.jpg"> <!-- URL d'une image pour le partage -->

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://offre-ideelab.vercel.app/"> <!-- Mettez votre URL finale ici -->
    <meta property="twitter:title" content="Offre de Service Interactive - IdéeLab inc.">
    <meta property="twitter:description" content="Générez une offre de service personnalisée pour vos projets d'automatisation et d'IA.">
    <meta property="twitter:image" content="https://n8n.ideelabcloud.ovh/images/og-image.jpg"> <!-- URL d'une image pour le partage -->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lexend:wght@400;500;600;700&family=Orbitron:wght@700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #0f172a;
            --glass-bg: rgba(255, 255, 255, 0.06);
            --border-color: rgba(255, 255, 255, 0.12);
            --primary-color: #38bdf8;
            --secondary-color: #818cf8;
            --highlight-color: #f472b6;
            --text-color: #e5e7eb;
            --text-strong-color: #ffffff;
        }
        *, *::before, *::after { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        @media (prefers-reduced-motion: reduce) {
            html { scroll-behavior: auto; }
            .background-gradient, .scroll-indicator { animation: none !important; }
        }
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.7;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            overflow: hidden;
        }
        body.modal-open .scroll-container {
            overflow: hidden;
        }
        .scroll-container { height: 100dvh; overflow-y: scroll; scroll-snap-type: y mandatory; }
        .full-page { height: 100dvh; scroll-snap-align: start; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; padding: 2rem; background-color: var(--bg-color); }
        .container-interactive { width: 100%; max-width: 1100px; text-align: center; position: relative; z-index: 2; }
        .background-gradient { position: absolute; top: 50%; left: 50%; width: 800px; height: 800px; background: radial-gradient(circle, var(--primary-color), transparent 60%); filter: blur(150px); transform: translate(-50%, -50%); animation: rotate-gradient 20s infinite linear; opacity: 0.2; z-index: -1; }
        @keyframes rotate-gradient { from { transform: translate(-50%, -50%) rotate(0deg); } to { transform: translate(-50%, -50%) rotate(360deg); } }
        .top-right-controls { position: absolute; top: 20px; right: 20px; z-index: 10; display: flex; gap: 15px; }
        .control-btn { background: none; border: 1px solid var(--border-color); color: var(--text-color); padding: 8px 12px; border-radius: 8px; cursor: pointer; font-family: 'Inter', sans-serif; font-size: 14px; transition: background-color 0.3s, color 0.3s; display: flex; align-items: center; gap: 8px; }
        .control-btn:hover { background-color: var(--glass-bg); color: var(--text-strong-color); }
        .control-btn svg { width: 16px; height: 16px; fill: currentColor; }
        .hero-name { font-family: 'Orbitron', sans-serif; font-size: clamp(3rem, 10vw, 5.5rem); color: var(--text-strong-color); margin: 0; font-weight: 700; }
        .hero-title { font-family: 'Lexend', sans-serif; font-size: clamp(1.2rem, 4vw, 1.8rem); margin: 0.5rem 0 1.5rem 0; font-weight: 400; color: var(--primary-color); }
        .section-title { font-family: 'Lexend', sans-serif; font-size: clamp(1.8rem, 3.2vw, 2.25rem); color: var(--text-strong-color); margin-bottom: 2rem; }
        
        .scroll-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 5;
            opacity: 0;
            animation: bounce 2.5s infinite 2s;
            color: white;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translate(-50%, 0);
                opacity: 1;
            }
            40% {
                transform: translate(-50%, -20px);
            }
            60% {
                transform: translate(-50%, -10px);
            }
        }

        .weaving-timeline-wrapper { width: 100%; max-width: 800px; margin: 0 auto; position: relative; padding: 20px 0; }
        .timeline-spine { position: absolute; left: 50%; top: 0; bottom: 0; width: 2px; background-color: var(--border-color); transform: translateX(-50%) scaleY(0); transform-origin: top; }
        .timeline-item { position: relative; margin-bottom: 30px; width: 50%; opacity: 0; }
        .timeline-item:last-child { margin-bottom: 0; }
        .timeline-item:nth-child(odd) { padding-right: 50px; text-align: right; transform: translateX(-20px); }
        .timeline-item:nth-child(even) { margin-left: 50%; padding-left: 50px; text-align: left; transform: translateX(20px); }
        .timeline-branch { position: absolute; top: 20px; width: 50px; height: 2px; background-color: var(--border-color); transform: scaleX(0); }
        .timeline-item:nth-child(odd) .timeline-branch { right: 0; transform-origin: right; }
        .timeline-item:nth-child(even) .timeline-branch { left: 0; transform-origin: left; }
        .timeline-dot { position: absolute; top: 15px; width: 12px; height: 12px; background-color: var(--bg-color); border: 2px solid var(--primary-color); border-radius: 50%; z-index: 1; transform: scale(0); }
        .timeline-item:nth-child(odd) .timeline-dot { right: -6px; }
        .timeline-item:nth-child(even) .timeline-dot { left: -6px; }
        .timeline-content { background: var(--glass-bg); padding: 1.5rem; position: relative; border-radius: 12px; border: 1px solid var(--border-color); backdrop-filter: blur(8px); cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; }
        .timeline-content:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .timeline-content h4 { font-family: 'Lexend', sans-serif; color: var(--primary-color); margin: 0; font-size: 1.2rem; }
        .timeline-content p { font-size: 0.9rem; line-height: 1.6; margin: 0; }
        
        .timeline-title-wrapper {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }
        .timeline-item:nth-child(odd) .timeline-title-wrapper {
            justify-content: flex-end;
        }

        .timeline-number {
            position: absolute;
            top: 21px;
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-strong-color);
            opacity: 0;
            z-index: 0;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
            transform: translateY(-50%) scale(0.5);
            pointer-events: none;
        }
        .timeline-item:nth-child(odd) .timeline-number {
            left: calc(100% + 25px);
        }
        .timeline-item:nth-child(even) .timeline-number {
            right: calc(100% + 25px);
        }

        .cost-card { 
            background: var(--glass-bg); 
            backdrop-filter: blur(10px); 
            padding: 2rem 2rem 3.5rem 2rem;
            border-radius: 16px; 
            border: 1px solid var(--border-color); 
            text-align: center; 
            display: flex; 
            flex-direction: column; 
            cursor: pointer; 
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        .cost-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .cost-card-icon { margin: 0 auto 1rem auto; color: var(--secondary-color); }
        .cost-card-icon svg { width: 40px; height: 40px; }
        .cost-card h4 { font-family: 'Lexend', sans-serif; color: var(--primary-color); font-size: 1.2rem; margin-top: 0; margin-bottom: 0.5rem; }
        .cost-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; }
        
        .card-modal-trigger {
            position: relative;
            bottom: auto;
            left: auto;
            transform: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
            border: 1px solid var(--border-color);
            flex-shrink: 0;
        }
        .card-modal-trigger:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }
        .card-modal-trigger svg {
            width: 14px;
            height: 14px;
            color: var(--text-color);
        }

        .roi-calculator { background: var(--glass-bg); backdrop-filter: blur(10px); padding: 2.5rem; border-radius: 16px; border: 1px solid var(--border-color); width: 100%; max-width: 800px; display: grid; grid-template-columns: 1fr 1fr; gap: 2.5rem; align-items: center; margin: 0 auto; }
        .roi-controls { text-align: left; }
        .roi-result { text-align: center; }
        .slider-group { margin-bottom: 1.5rem; }
        .slider-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
        .slider-group input[type="range"] { width: 100%; }
        .slider-group .value { color: var(--primary-color); font-weight: 700; }
        .roi-result .label { font-size: 1.2rem; }
        .roi-result .amount { font-family: 'Lexend', sans-serif; font-size: clamp(2.5rem, 8vw, 4.5rem); color: var(--highlight-color); font-weight: 700; margin: 0.5rem 0; }
        .roi-result .per-year { font-size: 1rem; color: var(--text-color); }

        .project-section-layout { display: flex; align-items: stretch; gap: 2rem; width: 100%; max-width: 1100px; }
        .final-cta-container { display: flex; flex-direction: column; align-items: center; }
        .form-info { flex: 1; text-align: left; }
        .form-info p { color: var(--text-color); }
        .project-form { background: var(--glass-bg); backdrop-filter: blur(10px); padding: 2rem; border-radius: 16px; border: 1px solid var(--border-color); width: 100%; max-width: 520px; text-align: left; flex-shrink: 0; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .form-group { margin-bottom: 1.5rem; }
        .full-width { grid-column: 1 / -1; }
        .form-group label { display: block; margin-bottom: 0.35rem; font-weight: 600; color: var(--primary-color); }
        .form-group input, .form-group textarea { width: 100%; padding: 0.8rem 1rem; border: 1px solid var(--border-color); background-color: #111827; color: var(--text-color); border-radius: 10px; font-size: 1rem; transition: border-color .2s, box-shadow .2s; }
        .form-group input:focus, .form-group textarea:focus { outline: 2px solid color-mix(in srgb, var(--primary-color) 60%, transparent); border-color: var(--primary-color); box-shadow: 0 0 0 4px rgba(56,189,248,.15); }
        .form-group textarea { min-height: 120px; resize: vertical; }
        .print-btn { background-image: linear-gradient(90deg, var(--primary-color), var(--secondary-color)); color: #fff; border: none; padding: 1rem 2rem; font-family: 'Lexend', sans-serif; font-weight: 600; border-radius: 999px; cursor: pointer; transition: transform .2s, box-shadow .2s; box-shadow: 0 10px 30px rgba(56,189,248,.22); display: flex; align-items: center; justify-content: center; }
        .print-btn:hover { transform: translateY(-2px) scale(1.02); box-shadow: 0 15px 40px rgba(56,189,248,.3); }
        .print-btn:disabled { opacity: .6; cursor: not-allowed; }
        .spinner { width: 1em; height: 1em; border: 2px solid rgba(255,255,255,.35); border-top-color: #fff; border-radius: 50%; animation: spin 1s linear infinite; margin-left: 8px; vertical-align: middle; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .inertia-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(15, 23, 42, 0.8); backdrop-filter: blur(12px); display: none; justify-content: center; align-items: center; z-index: 1000; opacity: 0; }
        .inertia-modal-content { background: var(--glass-bg); border: 1px solid var(--border-color); border-radius: 24px; width: 90%; max-width: 800px; padding: 2.5rem; display: flex; gap: 2rem; align-items: center; position: relative; transform: scale(0.9); }
        .modal-close-btn { position: absolute; top: 15px; right: 15px; background: none; border: none; color: var(--text-color); font-size: 2rem; cursor: pointer; line-height: 1; }
        .modal-visual { flex-basis: 40%; display: flex; justify-content: center; align-items: center; }
        .modal-text { flex-basis: 60%; text-align: left; }
        .modal-text h3 { font-family: 'Lexend', sans-serif; color: var(--primary-color); font-size: 1.8rem; margin-top: 0; }
        .modal-impact { margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-color); }
        .modal-impact h4 { font-family: 'Lexend', sans-serif; color: var(--highlight-color); margin: 0 0 0.5rem 0; }
        
        #processing-section .processing-steps { display: flex; justify-content: center; align-items: flex-start; gap: 2rem; flex-wrap: wrap; }
        #processing-section .step { display: flex; flex-direction: column; align-items: center; gap: 1rem; width: 150px; opacity: 0.4; transition: opacity 0.5s; }
        #processing-section .step .icon { width: 80px; height: 80px; border: 2px solid var(--border-color); border-radius: 50%; display: flex; justify-content: center; align-items: center; transition: all 0.5s; }
        #processing-section .step .icon svg { width: 40px; height: 40px; color: var(--border-color); transition: color 0.5s; }
        #processing-section .step .text { font-weight: 500; }
        #processing-section .step.active { opacity: 1; }
        #processing-section .step.active .icon { border-color: var(--primary-color); animation: pulse 1.5s infinite; }
        #processing-section .step.active .icon svg { color: var(--primary-color); }
        #processing-section .step.completed { opacity: 1; }
        #processing-section .step.completed .icon { background-color: var(--primary-color); border-color: var(--primary-color); animation: none; }
        #processing-section .step.completed .icon svg { color: var(--text-strong-color); }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(56, 189, 248, 0); } 100% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0); } }

        @media (max-width: 768px) {
            .project-section-layout { flex-direction: column; align-items: center; }
            .form-info { text-align: center; }
            .form-info .section-title { text-align: center !important; }
            .roi-calculator { grid-template-columns: 1fr; gap: 1.5rem; }
            .timeline-spine { left: 20px; }
            .timeline-item, .timeline-item:nth-child(even) { width: 100%; margin-left: 0; padding-left: 50px; padding-right: 0; text-align: left; }
            .timeline-item:nth-child(odd) { transform: translateX(20px); }
            .timeline-item:nth-child(odd) .timeline-branch, .timeline-item:nth-child(even) .timeline-branch { left: 0; width: 30px; transform-origin: left; }
            .timeline-item:nth-child(odd) .timeline-dot, .timeline-item:nth-child(even) .timeline-dot { left: -6px; }
            .timeline-number { display: none; }
            .timeline-content .card-modal-trigger { display: none; }
            .inertia-modal-content { flex-direction: column; padding: 1.5rem; }
            .modal-visual { flex-basis: auto; width: 100%; max-width: 200px; }
            .modal-text { flex-basis: auto; }
        }

        #particle-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        .printable-contract { display: none; }

        @media print {
            .scroll-container { display: none; }
            .printable-contract { display: block; }
            body { background-color: #fff !important; font-size: 10pt; padding: 0 !important; margin: 0 !important; overflow: visible; font-family: 'Inter', sans-serif; color: #272727; }
            .contract-container { width: 100%; height: 100%; display: flex; flex-direction: column; }
            .pdf-header { display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 2px solid #38bdf8; padding-bottom: 1rem; margin-bottom: 1.5rem; }
            .pdf-header .logo { font-family: 'Lexend', sans-serif; font-size: 24pt; font-weight: 700; color: #111827; }
            .pdf-header .title { text-align: right; }
            .pdf-header .title h1 { font-family: 'Lexend', sans-serif; font-size: 20pt; margin: 0; color: #111827; }
            .pdf-header .title p { margin: 0; font-size: 10pt; color: #6c757d; }
            .pdf-footer { text-align: center; font-size: 8pt; color: #6c757d; border-top: 1px solid #e5e7eb; padding-top: 0.5rem; margin-top: auto; }
            .pdf-main { width: 100%; }
            .pdf-section { margin-bottom: 1.2rem; page-break-inside: avoid; }
            .pdf-section h2 { font-family: 'Lexend', sans-serif; font-size: 13pt; color: #38bdf8; margin-top: 0; margin-bottom: 0.75rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.5rem; }
            .pdf-summary-band { display: flex; gap: 1rem; align-items: stretch; margin-bottom: 1.5rem; }
            .pdf-summary-band .pdf-section { flex: 1; margin-bottom: 0; border: 1px solid #e5e7eb; border-radius: 8px; padding: 0.75rem; background-color: #f8f9fa; }
            .pdf-summary-band .pdf-section h2 { font-size: 11pt; margin-bottom: 0.5rem; padding-bottom: 0.25rem; }
            .pdf-summary-band p, .pdf-summary-band .estimate-details { font-size: 9pt; }
            .pdf-summary-band .roi-section { background-color: #eefbff; border-color: #38bdf8; }
            .roi-summary p { font-size: 8pt; text-align: center; margin-bottom: 0.25rem; }
            .roi-amount { font-family: 'Lexend', sans-serif; font-size: 16pt; font-weight: 700; text-align: center; color: #1e3a8a; }
            .estimate-details .estimate-total { font-size: 14pt; margin-top: 0.5rem; text-align: center; font-weight: bold; color: #111827}
            blockquote { font-size: 10pt; padding: 0.5rem 1rem; border-left: 3px solid #38bdf8; margin-left: 0; font-style: italic; white-space: pre-wrap; background-color: #f8f9fa;}
            .disclaimer { font-size: 8pt; font-style: italic; color: #6c757d; margin-top: 1.5rem; border-top: 1px solid #e5e7eb; padding-top: 0.5rem; }
            .signature-section-container { background-color: transparent; padding: 0; margin-top: 2rem; }
            .signature-section-container h2 { display: none; }
            .signature-area { display: flex; justify-content: space-between; gap: 2rem; }
            .signature-block { flex: 1; text-align: center; }
            .signature-line { border-bottom: 1px solid #272727; height: 40px; margin-bottom: 0.5rem; }
            @page { size: letter; margin: 0.7in; }
        }
    </style>
</head>
<body>

    <div class="scroll-container">
        <div class="background-gradient"></div>
        <section class="hero full-page">
            <canvas id="particle-canvas"></canvas>
            <div class="top-right-controls">
                <button id="lang-toggle" class="control-btn">EN</button>
                <button id="fullscreen-toggle" class="control-btn"><svg viewBox="0 0 24 24"><path d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17H7V19H5V14H7V17H10V19Z"></path></svg></button>
            </div>
            <div class="container-interactive">
                <h1 class="hero-name" data-lang="heroName">IdéeLab inc.</h1>
                <h2 class="hero-title" data-lang="heroTitle">Explorer l'innovation, créer le futur.</h2>
            </div>
            <div class="scroll-indicator">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <polyline points="19 12 12 19 5 12"></polyline>
                </svg>
            </div>
        </section>
        
        <section class="full-page" id="approach-section">
            <div class="container-interactive">
                <h3 class="section-title" data-lang="approachTitle">Notre Approche</h3>
                <div class="weaving-timeline-wrapper">
                    <div class="timeline-spine"></div>
                    <div class="timeline-item" data-modal-id="decouverte">
                        <div class="timeline-number">1</div>
                        <div class="timeline-dot"></div>
                        <div class="timeline-branch"></div>
                        <div class="timeline-content">
                            <div class="timeline-title-wrapper">
                                <h4 data-lang="approachStep1Title">Découverte</h4>
                                <div class="card-modal-trigger">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                                </div>
                            </div>
                            <p data-lang="approachStep1Text">Analyse de vos défis et identification des opportunités.</p>
                        </div>
                    </div>
                    <div class="timeline-item" data-modal-id="co-creation">
                        <div class="timeline-number">2</div>
                        <div class="timeline-dot"></div>
                        <div class="timeline-branch"></div>
                        <div class="timeline-content">
                             <div class="timeline-title-wrapper">
                                <h4 data-lang="approachStep2Title">Co-création</h4>
                                <div class="card-modal-trigger">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                                </div>
                            </div>
                            <p data-lang="approachStep2Text">Conception d'une stratégie et d'un plan d'action sur mesure.</p>
                        </div>
                    </div>
                    <div class="timeline-item" data-modal-id="developpement">
                        <div class="timeline-number">3</div>
                        <div class="timeline-dot"></div>
                        <div class="timeline-branch"></div>
                        <div class="timeline-content">
                            <div class="timeline-title-wrapper">
                                <h4 data-lang="approachStep3Title">Développement</h4>
                                <div class="card-modal-trigger">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                                </div>
                            </div>
                            <p data-lang="approachStep3Text">Construction et intégration de la solution avec agilité.</p>
                        </div>
                    </div>
                    <div class="timeline-item" data-modal-id="deploiement">
                        <div class="timeline-number">4</div>
                        <div class="timeline-dot"></div>
                        <div class="timeline-branch"></div>
                        <div class="timeline-content">
                            <div class="timeline-title-wrapper">
                                <h4 data-lang="approachStep4Title">Déploiement</h4>
                                <div class="card-modal-trigger">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                                </div>
                            </div>
                            <p data-lang="approachStep4Text">Lancement et suivi rigoureux pour une performance optimale.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="full-page"><div class="container-interactive"><h3 class="section-title" data-lang="costTitle">Le Coût de l'Inertie</h3><div class="cost-grid"><div class="cost-card" data-modal-id="repetitive"><div class="cost-card-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg></div><h4 data-lang="costCard1Title">Tâches Répétitives</h4><p data-lang="costCard1Text">Des heures précieuses sont perdues chaque semaine par vos équipes sur des tâches manuelles qui pourraient être automatisées.</p><div class="card-modal-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg></div></div><div class="cost-card" data-modal-id="human-error"><div class="cost-card-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg></div><h4 data-lang="costCard2Title">Erreurs Humaines</h4><p data-lang="costCard2Text">La saisie manuelle de données et les processus complexes entraînent des erreurs coûteuses en temps et en argent.</p><div class="card-modal-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg></div></div><div class="cost-card" data-modal-id="untapped-potential"><div class="cost-card-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15.5 22a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5-.5h-2zM18 19H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v3"/><path d="M12 5V2a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v3"/><path d="M3 10h18"/><path d="m19 14-4 4-2-2"/></svg></div><h4 data-lang="costCard3Title">Potentiel Inexploité</h4><p data-lang="costCard3Text">Vos employés les plus qualifiés sont freinés par des tâches administratives, au lieu de se concentrer sur la croissance et l'innovation.</p><div class="card-modal-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg></div></div></div></div></section>
        
        <section class="full-page"><div class="container-interactive"><h3 class="section-title" data-lang="roiTitle">Calculez Votre Potentiel</h3><div class="roi-calculator"><div class="roi-controls"><div class="slider-group"><label for="employees" data-lang="roiEmployees">Nombre d'employés effectuant ces tâches</label><input type="range" id="employees" min="1" max="50" value="5"><span class="value"><span id="employeesValue">5</span></span></div><div class="slider-group"><label for="hours" data-lang="roiHours">Heures perdues par employé par semaine</label><input type="range" id="hours" min="1" max="10" value="3"><span class="value"><span id="hoursValue">3</span>h</span></div><div class="slider-group"><label for="wage" data-lang="roiWage">Coût horaire moyen d'un employé</label><input type="range" id="wage" min="20" max="100" value="35" step="5"><span class="value"><span id="wageValue">35</span> $/h</span></div></div><div class="roi-result"><div class="label" data-lang="roiSavings">Économies annuelles potentielles</div><div class="amount" id="roiAmount">$27,300</div><div class="per-year" data-lang="roiPerYear">par année</div></div></div></div></section>
        
        <section class="full-page" id="project-section"><div class="project-section-layout"><div class="form-info"><h3 class="section-title" data-lang="projectTitle" style="text-align: left;">Définissons Votre Projet</h3><p data-lang="projectDesc">Pour nous permettre de cerner vos besoins, veuillez remplir ce court formulaire. Les informations fournies nous aideront à générer une ébauche de solution personnalisée dans votre offre de service.</p></div><div class="project-form" aria-label="Formulaire de projet"><div class="form-grid"><div class="form-group"><label for="companyName" data-lang="formCompany">Nom de l'entreprise</label><input type="text" id="companyName" data-lang-placeholder="formCompanyPlaceholder"></div><div class="form-group"><label for="clientName" data-lang="formName">Personne ressource</label><input type="text" id="clientName" data-lang-placeholder="formNamePlaceholder"></div></div><div class="form-group full-width"><label for="clientContact" data-lang="formContact">Coordonnées (courriel ou téléphone)</label><input type="text" id="clientContact" data-lang-placeholder="formContactPlaceholder"></div><div class="form-group full-width"><label for="siteWebUrl">Site web de l'entreprise (Optionnel)</label><input type="url" id="siteWebUrl" placeholder="Ex: https://www.ideelab.dev"></div><div class="form-group full-width"><label for="projectGoals" data-lang="formGoals">Description du projet et objectifs</label><textarea id="projectGoals" data-lang-placeholder="formGoalsPlaceholder"></textarea></div><div class="form-group full-width"><button id="submit-project-btn" class="print-btn" style="width:100%;">Explorer l'innovation</button><p id="feedback-message" aria-live="polite" style="text-align:center; margin-top:10px; color:var(--primary-color); height: 1.2em;"></p></div></div></div></section>

        <!-- AJOUT : Page de traitement -->
        <section class="full-page" id="processing-section" style="display: none;">
            <div class="container-interactive">
                <h3 class="section-title" id="processing-title">Analyse en cours...</h3>
                <div class="processing-steps">
                    <div class="step" id="step1">
                        <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line></svg></div>
                        <div class="text">Initialisation</div>
                    </div>
                    <div class="step" id="step2">
                        <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg></div>
                        <div class="text">Analyse du site web</div>
                    </div>
                    <div class="step" id="step3">
                        <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.969 11.634a9.063 9.063 0 0 0-9.6-9.282 8.952 8.952 0 0 0-8.083 5.34c-.453.92-.682 1.927-.682 2.988s.229 2.068.682 2.988a8.952 8.952 0 0 0 8.083 5.34 9.063 9.063 0 0 0 9.6-9.282z"></path><path d="M12 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"></path><path d="M12 12v.01"></path></svg></div>
                        <div class="text">Analyse IA</div>
                    </div>
                    <div class="step" id="step4">
                        <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg></div>
                        <div class="text">Génération</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="full-page contact" id="final-section"><div class="container-interactive final-cta-container"><h3 class="section-title" data-lang="ctaTitle">Prêts à lancer le projet ?</h3><button id="generateBtn" class="print-btn" data-lang="ctaButton">Créer le futur</button></div></section>
    </div>
    
    <!-- MODALE POUR LE COÛT DE L'INERTIE -->
    <div id="inertia-modal" class="inertia-modal-overlay">
        <div class="inertia-modal-content">
            <button id="modal-close-btn" class="modal-close-btn">&times;</button>
            <div class="modal-visual" id="modal-visual-content"></div>
            <div class="modal-text">
                <h3 id="modal-title"></h3>
                <p id="modal-description"></p>
                <div class="modal-impact">
                    <h4 data-lang="modalImpactTitle">Impact Financier</h4>
                    <p id="modal-impact-text"></p>
                </div>
            </div>
        </div>
    </div>

    <div class="printable-contract">
        <div class="contract-container">
            <header class="pdf-header"><div class="logo">IdéeLab</div><div class="title"><h1 data-lang-print="contractTitle"></h1><p data-lang-print="contractPresentedBy"></p></div></header>
            <main class="pdf-main">
                <div class="pdf-summary-band">
                    <section class="pdf-section"><h2 data-lang-print="contractClient"></h2><p><strong id="contractCompanyName"></strong><br><span data-lang-print="contractAttention"></span> <span id="contractClientName"></span><br><span id="contractClientContact"></span></p></section>
                    <section class="pdf-section roi-section"><h2 data-lang-print="contractRoiTitle"></h2><div class="roi-summary"><p data-lang-print="contractRoiText"></p><div class="roi-amount" id="contractRoiValue"></div></div></section>
                    <section class="pdf-section"><h2 data-lang-print="contractInvestment"></h2><div class="estimate-details"><p><span id="contractEstimatedHours"></span>h @ 75.00 $</p><p class="estimate-total"><span id="contractTotalEstimate"></span></p></div></section>
                </div>
                <section class="pdf-section"><h2 data-lang-print="contractUnderstanding"></h2><blockquote id="contractProjectGoals"></blockquote></section>
                <section class="pdf-section"><h2 data-lang-print="contractSolution"></h2><div id="contractSolution"></div></section>
                <p class="disclaimer" data-lang-print="contractDisclaimer"></p>
                <section class="pdf-section signature-section-container"><h2 data-lang-print="contractSignature"></h2><div class="signature-area"><div class="signature-block"><div class="signature-line"></div><p><strong>IdéeLab inc.</strong><br><span data-lang-print="signatureDate"></span></p></div><div class="signature-block"><div class="signature-line"></div><p><strong id="contractSignatureName"></strong><br><span data-lang-print="signatureDate"></span></p></div></div></section>
            </main>
            <footer class="pdf-footer">IdéeLab inc. | 123 Rue de l'Innovation, Montréal, QC | contact@ideelab.dev</footer>
        </div>
    </div>

    <!-- AJOUT DES BIBLIOTHÈQUES D'ANIMATION -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <script>
        const translations = {
            fr: {
                heroName: "IdéeLab inc.", heroTitle: "Explorer l'innovation, créer le futur.",
                approachTitle: "Notre Approche",
                approachStep1Title: "Découverte",
                approachStep1Text: "Analyse de vos défis et identification des opportunités.",
                approachStep2Title: "Co-création",
                approachStep2Text: "Conception d'une stratégie et d'un plan d'action sur mesure.",
                approachStep3Title: "Développement",
                approachStep3Text: "Construction et intégration de la solution avec agilité.",
                approachStep4Title: "Déploiement",
                approachStep4Text: "Lancement et suivi rigoureux pour une performance optimale.",
                costTitle: "Le Coût de l'Inertie", costCard1Title: "Tâches Répétitives", costCard1Text: "Des heures précieuses sont perdues chaque semaine par vos équipes sur des tâches manuelles qui pourraient être automatisées.", costCard2Title: "Erreurs Humaines", costCard2Text: "La saisie manuelle de données et les processus complexes entraînent des erreurs coûteuses en temps et en argent.", costCard3Title: "Potentiel Inexploité", costCard3Text: "Vos employés les plus qualifiés sont freinés par des tâches administratives, au lieu de se concentrer sur la croissance et l'innovation.",
                roiTitle: "Calculez Votre Potentiel", roiEmployees: "Nombre d'employés effectuant ces tâches", roiHours: "Heures perdues par employé par semaine", roiWage: "Coût horaire moyen d'un employé", roiSavings: "Économies annuelles potentielles", roiPerYear: "par année",
                projectTitle: "Définissons Votre Projet", projectDesc: "Pour nous permettre de cerner vos besoins, veuillez remplir ce court formulaire. Les informations fournies nous aideront à générer une ébauche de solution personnalisée dans votre offre de service.",
                formCompany: "Nom de l'entreprise", formCompanyPlaceholder: "Ex: Ma Compagnie Inc.",
                formName: "Personne ressource", formNamePlaceholder: "Ex: Jean Dupont",
                formContact: "Coordonnées (courriel ou téléphone)", formContactPlaceholder: "Ex: jean.dupont@macompagnie.com",
                formGoals: "Description du projet et objectifs", formGoalsPlaceholder: "Ex: Nous souhaitons automatiser notre service client...",
                ctaTitle: "Prêts à lancer le projet ?", ctaButton: "Créer le futur",
                contractTitle: "Offre de Service", contractPresentedBy: "Présentée par IdéeLab inc.",
                contractClient: "Client", contractAttention: "À l'attention de:",
                contractUnderstanding: "Compréhension du Projet", contractSolution: "Solution Proposée",
                contractInvestment: "Investissement",
                contractDisclaimer: "Veuillez noter que cette estimation est fournie à titre indicatif, basée sur notre compréhension initiale de vos besoins. Le coût final sera facturé en fonction des heures réelles consacrées au projet.",
                contractSignature: "Signatures", signatureDate: "Date",
                contractRoiTitle: "ROI Potentiel", contractRoiText: "Basé sur les données fournies, l'automatisation de ces processus pourrait représenter une économie annuelle estimée de :",
                modalImpactTitle: "Impact Financier",
            },
            en: {
                heroName: "IdéeLab Inc.", heroTitle: "Exploring innovation, creating the future.",
                approachTitle: "Our Approach",
                approachStep1Title: "Discovery",
                approachStep1Text: "Analysis of your challenges and identification of opportunities.",
                approachStep2Title: "Co-creation",
                approachStep2Text: "Design of a tailor-made strategy and action plan.",
                approachStep3Title: "Development",
                approachStep3Text: "Agile construction and integration of the solution.",
                approachStep4Title: "Deployment",
                approachStep4Text: "Launch and rigorous monitoring for optimal performance.",
                costTitle: "The Cost of Inaction", costCard1Title: "Repetitive Tasks", costCard1Text: "Valuable hours are lost each week by your teams on manual tasks that could be automated.", costCard2Title: "Human Errors", costCard2Text: "Manual data entry and complex processes lead to costly errors in time and money.", costCard3Title: "Untapped Potential", costCard3Text: "Your most skilled employees are held back by administrative tasks, instead of focusing on growth and innovation.",
                roiTitle: "Calculate Your Potential", roiEmployees: "Number of employees performing these tasks", roiHours: "Hours lost per employee per week", roiWage: "Average hourly cost of an employee", roiSavings: "Potential Annual Savings", roiPerYear: "per year",
                projectTitle: "Let's Define Your Project", projectDesc: "To help us understand your needs, please fill out this short form. The information provided will help us generate a draft of a personalized solution in your service offer.",
                formCompany: "Company Name", formCompanyPlaceholder: "E.g., My Company Inc.",
                formName: "Contact Person", formNamePlaceholder: "E.g., John Doe",
                formContact: "Contact Information (email or phone)", formContactPlaceholder: "E.g., john.doe@mycompany.com",
                formGoals: "Project Description and Objectives", formGoalsPlaceholder: "E.g., We want to automate our customer service...",
                ctaTitle: "Ready to start the project?", ctaButton: "Create the Future",
                contractTitle: "Service Offer", contractPresentedBy: "Presented by IdéeLab Inc.",
                contractClient: "Client", contractAttention: "Attention:",
                contractUnderstanding: "Project Understanding", contractSolution: "Proposed Solution",
                contractInvestment: "Investment",
                contractDisclaimer: "Please note that this estimate is provided for informational purposes, based on our initial understanding of your needs. The final cost will be billed based on the actual hours spent on the project.",
                contractSignature: "Signatures", signatureDate: "Date",
                contractRoiTitle: "Potential ROI", contractRoiText: "Based on the data provided, automating these processes could represent an estimated annual saving of:",
                modalImpactTitle: "Financial Impact",
            }
        };

        window.addEventListener('load', () => {
            let currentLang = 'fr';
            let generatedSolutionHtml = ''; 
            let generatedHours = 0;
            let generatedDescription = '';
            let animationFrameId; 
            let isAnimationRunning = true;

            function switchLanguage(lang) {
                currentLang = lang;
                document.documentElement.lang = lang;
                document.querySelectorAll('[data-lang]').forEach(el => {
                    const key = el.getAttribute('data-lang');
                    if (translations[lang] && translations[lang][key]) {
                        el.innerHTML = translations[lang][key];
                    }
                });
                document.querySelectorAll('[data-lang-placeholder]').forEach(el => {
                    const key = el.getAttribute('data-lang-placeholder');
                    if (translations[lang] && translations[lang][key]) {
                        el.placeholder = translations[lang][key];
                    }
                });
                document.getElementById('lang-toggle').textContent = lang === 'fr' ? 'EN' : 'FR';
                updateROI();
            }

            function toggleFullscreen() {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(err => console.error(err));
                } else if (document.exitFullscreen) {
                    document.exitFullscreen().catch(err => console.error(err));
                }
            }

            function updateROI() {
                const employees = document.getElementById('employees').value;
                const hours = document.getElementById('hours').value;
                const wage = document.getElementById('wage').value;
                document.getElementById('employeesValue').textContent = employees;
                document.getElementById('hoursValue').textContent = hours;
                document.getElementById('wageValue').textContent = wage;
                const annualSavings = (employees * hours * wage) * 52;
                const formatter = new Intl.NumberFormat(currentLang === 'fr' ? 'fr-CA' : 'en-CA', { style: 'currency', currency: 'CAD', minimumFractionDigits: 0, maximumFractionDigits: 0 });
                document.getElementById('roiAmount').textContent = formatter.format(annualSavings);
            }

            async function generateSolutionWithAI(projectGoals, lang, siteWebUrl) {
                try {
                    const apiUrl = new URL('/api/generate', window.location.href);
                    const response = await fetch(apiUrl.href, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ projectGoals, lang, siteWebUrl }),
                    });

                    if (!response.ok) {
                        const errorText = await response.text();
                        console.error('Réponse d\'erreur du serveur (texte):', errorText);
                        throw new Error(`Le serveur a répondu avec une erreur: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    
                    if (data.error) {
                        throw new Error(data.error);
                    }
                    return data;
                } catch (error) {
                    console.error("ERREUR CRITIQUE dans generateSolutionWithAI:", error);
                    return null;
                }
            }
            
            function prepareAndPrint() {
                if (!generatedSolutionHtml) {
                    alert("Veuillez d'abord soumettre la description de votre projet à l'aide du bouton 'Pré-générer la Solution'.");
                    return;
                }
                const generateBtn = document.getElementById('generateBtn');
                generateBtn.disabled = true;
                try {
                    document.querySelectorAll('[data-lang-print]').forEach(el => {
                        const key = el.getAttribute('data-lang-print');
                        if (translations[currentLang][key]) { el.innerHTML = translations[currentLang][key]; }
                    });

                    const clientName = document.getElementById('clientName').value;
                    const companyName = document.getElementById('companyName').value;
                    const clientContact = document.getElementById('clientContact').value;
                    const potentialSavings = document.getElementById('roiAmount').textContent;
                    
                    document.getElementById('contractProjectGoals').textContent = generatedDescription || document.getElementById('projectGoals').value;
                    document.getElementById('contractSolution').innerHTML = generatedSolutionHtml;
                    
                    const estimatedHours = generatedHours;
                    const totalCost = estimatedHours * 75;

                    document.getElementById('contractClientName').textContent = clientName || "[Non spécifié]";
                    document.getElementById('contractCompanyName').textContent = companyName || "[Non spécifié]";
                    document.getElementById('contractClientContact').textContent = clientContact || "[Non spécifié]";
                    document.getElementById('contractRoiValue').textContent = potentialSavings;
                    document.getElementById('contractSignatureName').textContent = companyName || "[Non spécifié]";
                    document.getElementById('contractEstimatedHours').textContent = estimatedHours;
                    document.getElementById('contractTotalEstimate').textContent = `${totalCost.toLocaleString(currentLang === 'fr' ? 'fr-CA' : 'en-CA', { style: 'currency', currency: 'CAD' })}`;
                    
                    setTimeout(() => { window.print(); }, 100);
                } finally {
                    generateBtn.disabled = false;
                }
            }

            document.getElementById('lang-toggle').addEventListener('click', () => switchLanguage(currentLang === 'fr' ? 'en' : 'fr'));
            document.getElementById('fullscreen-toggle').addEventListener('click', toggleFullscreen);
            
            document.getElementById('submit-project-btn').addEventListener('click', async () => {
                const projectGoals = document.getElementById('projectGoals').value;
                if (!projectGoals.trim()) {
                    alert('Veuillez décrire votre projet avant de soumettre.');
                    return;
                }

                const siteWebUrl = document.getElementById('siteWebUrl').value;
                const scrollContainer = document.querySelector('.scroll-container');
                const processingSection = document.getElementById('processing-section');
                
                scrollContainer.style.display = 'none';
                processingSection.style.display = 'flex';

                const steps = [
                    { id: 'step1', delay: 500 },
                    { id: 'step2', delay: 1500, optional: !siteWebUrl.trim() },
                    { id: 'step3', delay: 1500 },
                    { id: 'step4', delay: 1000 }
                ];

                for (const step of steps) {
                    if (step.optional) continue;
                    document.getElementById(step.id).classList.add('active');
                    await new Promise(resolve => setTimeout(resolve, step.delay));
                    document.getElementById(step.id).classList.remove('active');
                    document.getElementById(step.id).classList.add('completed');
                }

                const result = await generateSolutionWithAI(projectGoals, currentLang, siteWebUrl);
                
                const solutionData = Array.isArray(result) ? result[0] : result;

                if (solutionData && solutionData.solution) {
                    generatedSolutionHtml = solutionData.solution;
                    generatedHours = solutionData.estimatedHours;
                    generatedDescription = "Généré par IA"; 
                    
                    document.getElementById('processing-title').textContent = 'Analyse terminée !';
                    setTimeout(() => {
                        processingSection.style.display = 'none';
                        scrollContainer.style.display = 'block';
                        document.getElementById('final-section').scrollIntoView();
                    }, 1000);
                } else {
                    alert('Désolé, une erreur est survenue lors de la génération. Veuillez réessayer.');
                    processingSection.style.display = 'none';
                    scrollContainer.style.display = 'block';
                    document.getElementById('project-section').scrollIntoView();
                }
            });

            document.getElementById('generateBtn').addEventListener('click', prepareAndPrint);
            document.getElementById('employees').addEventListener('input', updateROI);
            document.getElementById('hours').addEventListener('input', updateROI);
            document.getElementById('wage').addEventListener('input', updateROI);
            
            switchLanguage('fr');
            updateROI();

            gsap.registerPlugin(ScrollTrigger);
            
            const approachSection = document.getElementById('approach-section');
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: approachSection,
                    scroller: ".scroll-container",
                    start: "top center",
                    end: "bottom bottom",
                    toggleActions: "play none none reverse"
                }
            });

            // --- CORRECTION : Animation synchronisée et plus rapide ---
            const staggerValue = 0.4; // Augmente la vitesse entre chaque item
            const durationValue = 0.5; // Augmente la vitesse de l'animation de chaque item

            tl.to(".timeline-spine", { scaleY: 1, duration: 1.5, ease: "power2.inOut" });

            document.querySelectorAll('.timeline-item').forEach((item) => {
                const dot = item.querySelector('.timeline-dot');
                const branch = item.querySelector('.timeline-branch');
                const number = item.querySelector('.timeline-number');

                tl.to([item, number], {
                    opacity: 1,
                    x: 0,
                    scale: 1,
                    duration: durationValue,
                    ease: "power2.out",
                }, `-=${durationValue * 0.7}`) // Timing ajusté pour un meilleur enchaînement
                .to(dot, {
                    scale: 1,
                    duration: 0.3,
                    ease: "back.out(1.7)",
                }, "<0.1")
                .to(branch, {
                    scaleX: 1,
                    duration: 0.4,
                    ease: "power2.out",
                }, "<");
            });

            const canvas = document.getElementById('particle-canvas');
            const ctx = canvas.getContext('2d');
            let particlesArray;
            const resizeCanvas = () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                init();
            };
            class Particle {
                constructor(x, y, dX, dY, size) { this.x = x; this.y = y; this.directionX = dX; this.directionY = dY; this.size = size; }
                draw() { ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fillStyle = 'rgba(163, 163, 163, 0.5)'; ctx.fill(); }
                update() {
                    if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
                    if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;
                    this.x += this.directionX;
                    this.y += this.directionY;
                    this.draw();
                }
            }
            function init() {
                particlesArray = [];
                let numParticles = (canvas.height * canvas.width) / 9000;
                for (let i = 0; i < numParticles; i++) {
                    let size = (Math.random() * 2) + 1;
                    let x = Math.random() * (innerWidth - size * 2) + size;
                    let y = Math.random() * (innerHeight - size * 2) + size;
                    let dX = (Math.random() * .4) - .2;
                    let dY = (Math.random() * .4) - .2;
                    particlesArray.push(new Particle(x, y, dX, dY, size));
                }
            }
            function connect() {
                for (let a = 0; a < particlesArray.length; a++) {
                    for (let b = a; b < particlesArray.length; b++) {
                        let dist = Math.hypot(particlesArray[a].x - particlesArray[b].x, particlesArray[a].y - particlesArray[b].y);
                        if (dist < (canvas.width / 7)) {
                            let opacity = 1 - (dist / 150);
                            ctx.strokeStyle = `rgba(129, 140, 248, ${opacity})`;
                            ctx.lineWidth = 1;
                            ctx.beginPath(); ctx.moveTo(particlesArray[a].x, particlesArray[a].y); ctx.lineTo(particlesArray[b].x, particlesArray[b].y); ctx.stroke();
                        }
                    }
                }
            }
            function animate() {
                if (!isAnimationRunning) return;
                animationFrameId = requestAnimationFrame(animate);
                ctx.clearRect(0, 0, innerWidth, innerHeight);
                particlesArray.forEach(p => p.update());
                connect();
            }
            window.addEventListener('resize', resizeCanvas);
            window.addEventListener('afterprint', () => {
                const generateBtn = document.getElementById('generateBtn');
                generateBtn.disabled = false;
                generateBtn.innerHTML = translations[currentLang].ctaButton;
                isAnimationRunning = true;
                animate();
            });
            resizeCanvas();
            animate();
            
            const modalData = {
                'repetitive': {
                    title: "Tâches Répétitives",
                    description: "L'automatisation transforme les tâches manuelles, comme la saisie de données ou la génération de rapports, en processus autonomes. Cela libère vos équipes pour qu'elles se concentrent sur des activités à plus forte valeur ajoutée.",
                    impact: "Une réduction de 5 heures par semaine pour 5 employés à 35$/h représente une économie annuelle de plus de 45 000$.",
                    visual: `<svg width="200" height="200" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}" stroke-width="2" fill="none" stroke-dasharray="5 5" />
                                <g id="gears">
                                    <circle cx="50" cy="50" r="15" fill="${getComputedStyle(document.documentElement).getPropertyValue('--secondary-color')}" />
                                    <circle cx="50" cy="25" r="5" fill="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}" />
                                </g>
                                <animateTransform xlink:href="#gears" attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="4s" repeatCount="indefinite" />
                             </svg>`
                },
                'human-error': {
                    title: "Erreurs Humaines",
                    description: "Les systèmes automatisés exécutent les tâches avec une précision constante, éliminant les erreurs de saisie, les oublis et les incohérences qui peuvent coûter cher en corrections et en perte de confiance client.",
                    impact: "Éviter une seule erreur de facturation majeure ou une mauvaise commande par mois peut préserver des milliers de dollars et protéger votre réputation.",
                    visual: `<svg width="200" height="200" viewBox="0 0 100 100">
                                <path id="path-ok" d="M20 50 L40 70 L80 30" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}" stroke-width="4" fill="none" stroke-dasharray="100" stroke-dashoffset="100" />
                                <path id="path-error" d="M20 20 L80 80 M80 20 L20 80" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--highlight-color')}" stroke-width="4" fill="none" opacity="0.3" />
                                <animate xlink:href="#path-ok" attributeName="stroke-dashoffset" from="100" to="0" dur="2s" begin="0s;anim2.end" id="anim1" />
                                <animate xlink:href="#path-ok" attributeName="stroke-dashoffset" from="0" to="-100" dur="2s" begin="anim1.end" id="anim2" />
                             </svg>`
                },
                'untapped-potential': {
                    title: "Potentiel Inexploité",
                    description: "Lorsque vos experts sont libérés des tâches administratives, ils peuvent enfin se consacrer à l'innovation, à la stratégie et à l'amélioration de l'expérience client. C'est là que se trouve la véritable croissance.",
                    impact: "Permettre à vos talents de se concentrer sur leur cœur de métier n'est pas une économie, c'est un investissement direct dans la croissance et la compétitivité de votre entreprise.",
                    visual: `<svg width="200" height="200" viewBox="0 0 100 100">
                                <defs><filter id="glow"><feGaussianBlur stdDeviation="2.5" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs>
                                <path d="M50 90 V 70" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--border-color')}" stroke-width="2"/>
                                <circle id="bulb" cx="50" cy="50" r="20" fill="${getComputedStyle(document.documentElement).getPropertyValue('--glass-bg')}" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}" stroke-width="2"/>
                                <g id="rays" opacity="0">
                                    <path d="M50 25 V 10" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M70 30 L80 20" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M30 30 L20 20" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}" stroke-width="2" stroke-linecap="round"/>
                                </g>
                                <animate xlink:href="#rays" attributeName="opacity" from="0" to="1" dur="1s" begin="0.5s" fill="freeze" />
                                <animate xlink:href="#bulb" attributeName="fill" from="${getComputedStyle(document.documentElement).getPropertyValue('--glass-bg')}" to="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}" dur="1s" begin="0.5s" fill="freeze" />
                             </svg>`
                },
                'decouverte': {
                    title: "Découverte",
                    description: "Nous plongeons au cœur de vos opérations pour comprendre vos processus, identifier les points de friction et déceler les opportunités d'automatisation et d'IA à plus fort impact.",
                    impact: "Cette phase est cruciale pour garantir que la solution finale soit parfaitement alignée avec vos objectifs stratégiques.",
                    visual: `<svg width="200" height="200" viewBox="0 0 100 100">
                                <circle cx="45" cy="45" r="25" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}" stroke-width="2" fill="none"/>
                                <line x1="60" y1="60" x2="75" y2="75" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}" stroke-width="2" stroke-linecap="round"/>
                                <path id="scan-line" d="M30 45 H 60" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--secondary-color')}" stroke-width="2"/>
                                <animate xlink:href="#scan-line" attributeName="d" from="M30 30 H 60" to="M30 60 H 60" dur="2s" repeatCount="indefinite" />
                             </svg>`
                },
                'co-creation': {
                    title: "Co-création",
                    description: "Ensemble, nous concevons l'architecture de la solution. C'est un processus collaboratif où nous validons chaque étape pour construire une feuille de route claire et un plan d'action sur mesure.",
                    impact: "Votre expertise métier combinée à notre savoir-faire technique crée une synergie puissante pour un projet réussi.",
                    visual: `<svg width="200" height="200" viewBox="0 0 100 100">
                                <path id="puzzle1" d="M20 40 H 40 V 60 H 20 Z" fill="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}">
                                    <animate attributeName="x" from="20" to="30" dur="1.5s" begin="0s" repeatCount="indefinite" direction="alternate" />
                                </path>
                                <path id="puzzle2" d="M60 40 H 80 V 60 H 60 Z" fill="${getComputedStyle(document.documentElement).getPropertyValue('--secondary-color')}">
                                    <animate attributeName="x" from="60" to="50" dur="1.5s" begin="0s" repeatCount="indefinite" direction="alternate" />
                                </path>
                             </svg>`
                },
                'developpement': {
                    title: "Développement",
                    description: "Nos experts construisent la solution en utilisant des méthodes agiles. Vous suivez l'avancement en temps réel et participez aux validations régulières pour un ajustement parfait.",
                    impact: "L'agilité nous permet de nous adapter rapidement et de garantir que le produit final correspond précisément à vos attentes.",
                    visual: `<svg width="200" height="200" viewBox="0 0 100 100">
                                <polyline points="30,50 40,60 50,40 60,60 70,50" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="100" stroke-dashoffset="100">
                                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite" />
                                </polyline>
                                <text x="25" y="35" font-family="monospace" font-size="10" fill="${getComputedStyle(document.documentElement).getPropertyValue('--secondary-color')}">&lt;/&gt;</text>
                             </svg>`
                },
                'deploiement': {
                    title: "Déploiement",
                    description: "Nous intégrons la solution dans votre environnement de production, formons vos équipes et assurons un suivi rigoureux pour garantir une adoption réussie et une performance optimale.",
                    impact: "Un lancement maîtrisé est la clé pour maximiser le retour sur investissement et l'autonomie de vos équipes.",
                    visual: `<svg width="200" height="200" viewBox="0 0 100 100">
                                <path id="rocket" d="M50 80 L 40 60 H 60 Z M 45 60 V 40 H 55 V 60 Z M 50 40 L 45 30 H 55 Z" fill="${getComputedStyle(document.documentElement).getPropertyValue('--primary-color')}">
                                     <animateMotion path="M0,0 V-60" dur="2s" repeatCount="indefinite" />
                                </path>
                                <g id="smoke">
                                    <circle cx="50" cy="85" r="3" fill="${getComputedStyle(document.documentElement).getPropertyValue('--secondary-color')}" opacity="0.8"><animate attributeName="cy" from="85" to="110" dur="1s" repeatCount="indefinite" begin="0s"/></circle>
                                    <circle cx="45" cy="85" r="4" fill="${getComputedStyle(document.documentElement).getPropertyValue('--secondary-color')}" opacity="0.5"><animate attributeName="cy" from="85" to="115" dur="1s" repeatCount="indefinite" begin="0.2s"/></circle>
                                    <circle cx="55" cy="85" r="3" fill="${getComputedStyle(document.documentElement).getPropertyValue('--secondary-color')}" opacity="0.6"><animate attributeName="cy" from="85" to="112" dur="1s" repeatCount="indefinite" begin="0.4s"/></circle>
                                </g>
                             </svg>`
                }
            };

            const modalOverlay = document.getElementById('inertia-modal');
            const modalContent = modalOverlay.querySelector('.inertia-modal-content');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            document.querySelectorAll('.cost-card, .timeline-item').forEach(card => {
                card.addEventListener('click', () => {
                    const modalId = card.dataset.modalId;
                    const data = modalData[modalId];
                    if (!data) return; // Sécurité pour éviter les erreurs

                    document.getElementById('modal-title').textContent = data.title;
                    document.getElementById('modal-description').textContent = data.description;
                    document.getElementById('modal-impact-text').textContent = data.impact;
                    document.getElementById('modal-visual-content').innerHTML = data.visual;

                    document.body.classList.add('modal-open');
                    gsap.to(modalOverlay, { autoAlpha: 1, duration: 0.3, onStart: () => modalOverlay.style.display = 'flex' });
                    gsap.to(modalContent, { scale: 1, duration: 0.3, ease: 'back.out(1.7)' });
                });
            });

            function closeModal() {
                gsap.to(modalOverlay, { autoAlpha: 0, duration: 0.3, onComplete: () => {
                    modalOverlay.style.display = 'none';
                    document.body.classList.remove('modal-open');
                }});
                gsap.to(modalContent, { scale: 0.9, duration: 0.3, ease: 'power2.in' });
            }

            modalCloseBtn.addEventListener('click', closeModal);
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) {
                    closeModal();
                }
            });

        });
    </script>

</body>
</html>
